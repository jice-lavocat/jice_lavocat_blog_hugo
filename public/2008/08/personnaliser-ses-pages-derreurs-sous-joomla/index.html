<!DOCTYPE html>
<html lang="fr-FR">
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

  	<meta property="og:title" content=" Personnaliser ses pages d’erreurs sous Joomla &middot;  World Hacks" />
  	<meta property="og:site_name" content="World Hacks" />
  	<meta property="og:url" content="http://jice.lavocat.name/blog/2008/08/personnaliser-ses-pages-derreurs-sous-joomla/" />
    
    
  	<meta property="og:type" content="article" />

    <meta property="og:article:published_time" content="2008-08-31T00:00:00Z" />

    
    <meta property="og:article:tag" content="404" />
    
    <meta property="og:article:tag" content="Joomla" />
    
    

  <title>
     Personnaliser ses pages d’erreurs sous Joomla &middot;  World Hacks
  </title>

    <meta name="description" content="French/English essays about our Digital World, about Nature and Mind" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="http://jice.lavocat.name/blog/images/favicon.ico">
	  <link rel="apple-touch-icon" href="http://jice.lavocat.name/blog/images/apple-touch-icon.png" />
    
    <link rel="stylesheet" type="text/css" href="http://jice.lavocat.name/blog/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400|Inconsolata" />


    
      
          <link href="http://jice.lavocat.name/blog/index.xml" rel="alternate" type="application/rss+xml" title="World Hacks" />
      
      
    
    <meta name="generator" content="Hugo 0.14" />

    <link rel="canonical" href="http://jice.lavocat.name/blog/2008/08/personnaliser-ses-pages-derreurs-sous-joomla/" />

    
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-3492655-1', 'auto');
      ga('send', 'pageview');

    </script>
    
</head>
<body class="nav-closed">

  <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        
        
            
            <li class="nav-opened" role="presentation">
            	<a href="http://jice.lavocat.name/blog/">My Blog</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="http://jice.lavocat.name/blog/about/">About me</a>
            </li>
        
    </ul>
    
    
    <a class="subscribe-button icon-feed" href="http://jice.lavocat.name/blog/index.xml">Subscribe</a>
    
</div>
<span class="nav-cover"></span>


 <div class="site-wrapper">



<header class="main-header post-head no-cover">
  <nav class="main-nav clearfix">


  
      <a class="blog-logo" href="http://jice.lavocat.name/blog/"><img src="http://jice.lavocat.name/blog/images/logo.png" alt="Home" /></a><a class="blog-logo" href="http://jice.lavocat.name/blog/"><div style="padding-left: 7px;text-align: left; color: #000;">World Hacks (Home)</div></a>
  
  
      <a class="menu-button" href="#"><span class="burger">&#9776;</span><span class="word">Menu</span></a>
  
  </nav>
</header>



<main class="content" role="main">




  <article class="post post">

    <header class="post-header">
        <h1 class="post-title">Personnaliser ses pages d’erreurs sous Joomla</h1>
        <section class="post-meta">
        
          <time class="post-date" datetime="2008-08-31T00:00:00Z">
            Aug 31, 2008
          </time>
        
         
          <span class="post-tag small"><a href="http://jice.lavocat.name/blog/tags/404/">#404</a></span>
         
          <span class="post-tag small"><a href="http://jice.lavocat.name/blog/tags/joomla/">#Joomla</a></span>
         
        </section>
    </header>
  
    <section class="post-content">
      

<p align="justify">
  Vous possédez un site sous <strong>Joomla</strong>, vous vouliez faire des <strong>pages d&#8217;erreur 404 personnalisées</strong>? Malheureusement, la mise en place des <strong>URLs SEF</strong> sous Joomla vous empêche de le faire.
</p>

<p align="justify">
  En effet, toutes les URLs sont redirigées vers le module de SEF de Joomla qui traite lui même les adresses URL demandées. Du coup, impossible de traiter cette fameuse page 404. Il existe pourtant une solution.
</p>

<h3 id="customiser-le-fichier-error-php:557dee83bad01ab8ba3da9f921373356">Customiser le fichier error.php</h3>

<p align="justify">
  Dans Joomla 1.5 l&#8217;affichage des messages d&#8217;erreurs se fait grâce au fichier <strong>error.php</strong> présent dans <em>racine/templates/system</em>. Pour le customiser, copier ce fichier dans le répertoire de votre template actuel. Faites-y les modifications que vous voulez, et le tour est joué.
</p>

<p align="justify">
  &#8230;
</p>

<p align="justify">
  Ce fut bref comme tuto non? Bon, ok, je vais jusqu&#8217;au bout.
</p>

<p align="justify">
  <h3>
    Adapter Joomla, l&#8217;Erreur 404 et le script Google :
  </h3>
  
  <p align="justify">
    Dans son site d&#8217;aide aux webmasters, google fournit un script pour renvoyer si possible au visiteur une page la plus proche de celle recherchée. Pour l&#8217;utiliser, rien de plus simple, il suffit de créer une page, et d&#8217;y insérer le code html. Le script récupérera l&#8217;adresse URL demandé, et fera (je suppose) une recherche dans la base de donnée Google pour voir quelle URL est la plus proche.
  </p>
  

<p><p align="justify">
    On aurait pu créer un article Joomla dans lequel serait indiqué à l&#8217;utilisateur qu&#8217;il tombe sur une erreur 404, et mettre à la suite le script. Dans le fichier error.php personnalisé nous aurions mis dans les premières lignes :
  </p></p>

<p><p>
    &lt;?php<br /> if ($this-&gt;error-&gt;code = &#8216;404&#8217;) {<br /> header(&#8220;HTTP/1.0 404 Not Found&#8221;);<br /> header(&#8216;Location: <a href="http://www.mon_site.fr/index.php?option=com_content&amp;view=article&amp;id=16&amp;Itemid=14&amp;#8242;">http://www.mon_site.fr/index.php?option=com_content&amp;view=article&amp;id=16&amp;Itemid=14&amp;#8242;</a>); //adresse de l&#8217;article 404 sous joomla<br /> exit;<br /> }<br /> ?&gt;
  </p></p>

<p><p>
    Mais le problème vient du fonctionnement du script. Celui-ci regarde l&#8217;URL donnée en entrée. Et là, il y voit l&#8217;adresse de la page d&#8217;erreur <figure >

    <img src="http://jice.lavocat.name/blog//plugins/editors/tinymce/jscripts/tiny_mce/plugins/emotions/images/smiley-undecided.gif" alt="Undecided" />
    

<figcaption>
    <h4>Undecided</h4>
    
</figcaption>

</figure>.
  </p></p>

<p><p>
    Voilà la solution : juste après
  </p></p>

<p><p>
    defined( &#8216;_JEXEC&#8217; ) or die( &#8216;Restricted access&#8217; );
  </p></p>

<p><p>
    J&#8217;ai mis les lignes suivantes (et j&#8217;ai laissé le reste du fichier error.php inchangé par rapport à celui d&#8217;origine) :
  </p></p>

<p><p>
    if ($this-&gt;error-&gt;code = &#8216;404&#8217;) {<br /> header(&#8220;HTTP/1.0 404 Not Found&#8221;);<br /> $url=&#8221;<a href="http://www.mon-site.fr/index.php?option=com_content&amp;view=article&amp;id=16&amp;Itemid=14&amp;#8243;">http://www.mon-site.fr/index.php?option=com_content&amp;view=article&amp;id=16&amp;Itemid=14&amp;#8243;</a>; //adresse article 404<br /> $result= file_get_contents($url);<br /> echo $result;
  </p></p>

<p><p>
    exit;<br /> }
  </p></p>

<p><p>
    Le script prend alors bien en compte l&#8217;URL demandée par le visiteur.
  </p></p>

<p><p>
    Par contre, <strong>j&#8217;aurais besoin de vos commentaires</strong> : je n&#8217;ai pas l&#8217;impression que ce script google marche très bien. Est-ce le cas pour vous? Sur joomla ou non?
  </p></p>

    </section>


  <footer class="post-footer">


    
    <figure class="author-image">
        <a class="img" href="http://jice.lavocat.name/blog/" style="background-image: url(http://jice.lavocat.name/blog/images/logo.png)"><span class="hidden">Jean-Christophe Lavocat's Picture</span></a>
    </figure>
    

    





<section class="author">
  <h4><a href="http://jice.lavocat.name/blog/">Jean-Christophe Lavocat</a></h4>
  
  <p>World citizen, often found in France, loving Nature, Music and Startups</p>
  
  <div class="author-meta">
    <span class="author-location icon-location">Toulon, France</span>
    <span class="author-link icon-link"><a href="http://jice.lavocat.name">http://jice.lavocat.name</a></span>
  </div>
</section>



    
    <section class="share">
      <h4>Share this post</h4>
      <a class="icon-twitter" style="font-size: 1.4em" href="https://twitter.com/share?text=Personnaliser%20ses%20pages%20d%e2%80%99erreurs%20sous%20Joomla&amp;url=http%3a%2f%2fjice.lavocat.name%2fblog%2f2008%2f08%2fpersonnaliser-ses-pages-derreurs-sous-joomla%2f"
          onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
          <span class="hidden">Twitter</span>
      </a>
      <a class="icon-facebook" style="font-size: 1.4em" href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2fjice.lavocat.name%2fblog%2f2008%2f08%2fpersonnaliser-ses-pages-derreurs-sous-joomla%2f"
          onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
          <span class="hidden">Facebook</span>
      </a>
      <a class="icon-google-plus" style="font-size: 1.4em" href="https://plus.google.com/share?url=http%3a%2f%2fjice.lavocat.name%2fblog%2f2008%2f08%2fpersonnaliser-ses-pages-derreurs-sous-joomla%2f"
         onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
          <span class="hidden">Google+</span>
      </a>
    </section>
    

    
    
    <div id="disqus_thread"></div>
    <script type="text/javascript">
      var disqus_shortname = 'jicelavocat';
      (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    
    

  </footer>
</article>

</main>
    <footer class="site-footer clearfix">
        <section class="copyright"><a href="">World Hacks</a> All rights reserved - 2015</section>
        
        <section class="poweredby">Proudly generated by <a class="icon-hugo" href="http://gohugo.io">HUGO</a>, with <a class="icon-theme" href="https://github.com/vjeantet/hugo-theme-casper">Casper</a> theme</section>
        
    </footer>
    </div>
    <script type="text/javascript" src="http://jice.lavocat.name/blog/js/jquery.js"></script>
    <script type="text/javascript" src="http://jice.lavocat.name/blog/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="http://jice.lavocat.name/blog/js/index.js"></script>

</body>
</html>

